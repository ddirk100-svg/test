<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë„¤ì´ë²„ ë‰´ìŠ¤ AI ìš”ì•½ ì„œë¹„ìŠ¤</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="{{ url_for('static', filename='common.js') }}"></script>
</head>
<body>
    <div class="container">
        <div class="home-section">
            <div class="header-with-auth">
                <h1 class="logo">ğŸ“° ë‰´ìŠ¤ AI ìš”ì•½ v3.0</h1>
                <div class="auth-buttons">
                    {% if session.user_id %}
                    <!-- ë¡œê·¸ì¸ ìƒíƒœ -->
                    <span class="user-email">ğŸ‘¤ {{ session.user_email }}</span>
                    <a href="/favorites" class="favorites-link" title="ë‚´ ì¦ê²¨ì°¾ê¸°">
                        ğŸ“š ì¦ê²¨ì°¾ê¸°
                    </a>
                    <a href="/logout" class="logout-link" title="ë¡œê·¸ì•„ì›ƒ">
                        ğŸšª ë¡œê·¸ì•„ì›ƒ
                    </a>
                    {% else %}
                    <!-- ë¡œê·¸ì•„ì›ƒ ìƒíƒœ -->
                    <a href="/login" class="login-link">
                        ğŸ” ë¡œê·¸ì¸
                    </a>
                    <a href="/register" class="register-link">
                        âœ¨ íšŒì›ê°€ì…
                    </a>
                    {% endif %}
                </div>
            </div>
            <p class="subtitle">ê¶ê¸ˆí•œ í‚¤ì›Œë“œë¥¼ ê²€ìƒ‰í•˜ë©´ ë‰´ìŠ¤ ê¸°ì‚¬ì™€ AIìš”ì•½ì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            
            {% if error %}
            <div class="error-message">
                âš ï¸ {{ error }}
            </div>
            {% endif %}
            
            <form action="/search" method="get" class="search-form" id="searchForm">
                <div class="search-box">
                    <input 
                        type="text" 
                        name="query" 
                        placeholder="ì˜ˆ: AI, ê²½ì œ, ë‚ ì”¨, ìŠ¤í¬ì¸ ..." 
                        required
                        class="search-input"
                        id="searchInput"
                        autofocus
                    >
                    <button type="submit" class="search-button" id="searchButton">
                        <span class="button-text">ğŸ” ê²€ìƒ‰</span>
                        <span class="button-loading" style="display: none;">
                            <span class="spinner"></span> ê²€ìƒ‰ ì¤‘...
                        </span>
                    </button>
                </div>
                
                <!-- ë‰´ìŠ¤ ê°œìˆ˜ ìŠ¬ë¼ì´ë” -->
                <div class="slider-container">
                    <div class="slider-header">
                        <span class="slider-label">í‘œì‹œí•  ê¸°ì‚¬ ê°œìˆ˜</span>
                        <span class="slider-value" id="displayValue">5ê°œ</span>
                    </div>
                    <input 
                        type="range" 
                        name="display" 
                        min="1" 
                        max="10" 
                        value="5" 
                        class="news-slider"
                        id="newsSlider"
                    >
                    <div class="slider-range">
                        <span>1ê°œ</span>
                        <span>5ê°œ</span>
                        <span>10ê°œ</span>
                    </div>
                </div>
            </form>
            
            <div class="info-section">
                <h3>ğŸ’¡ ì´ìš© ë°©ë²•</h3>
                <ul>
                    <li>ê´€ì‹¬ìˆëŠ” í‚¤ì›Œë“œë¥¼ ê²€ìƒ‰ì°½ì— ì…ë ¥í•˜ì„¸ìš”</li>
                    <li>ë„¤ì´ë²„ì—ì„œ ê´€ë ¨ë„ ë†’ì€ ë‰´ìŠ¤ ê¸°ì‚¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤</li>
                    <li>GPT-4oê°€ ê° ë‰´ìŠ¤ë¥¼ í•œ ë¬¸ì¥ìœ¼ë¡œ ìš”ì•½í•©ë‹ˆë‹¤</li>
                    <li>ì¹´ë“œë¥¼ í´ë¦­í•˜ë©´ ì „ì²´ ê¸°ì‚¬ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
                </ul>
            </div>
        </div>
    </div>
    
    <footer>
        <p>Powered by Naver News API & OpenAI GPT-4o-mini</p>
    </footer>
    
    <script>
        // ìºì‹œ ë°©ì§€ (ë’¤ë¡œê°€ê¸° ëŒ€ì‘)
        preventCacheOnPageShow();

        // ìŠ¬ë¼ì´ë” ê°’ ì—…ë°ì´íŠ¸
        const slider = document.getElementById('newsSlider');
        const displayValue = document.getElementById('displayValue');
        
        slider.addEventListener('input', function() {
            displayValue.textContent = this.value + 'ê°œ';
        });
        
        // ê²€ìƒ‰ í¼ ë¡œë”© ì²˜ë¦¬
        const searchForm = document.getElementById('searchForm');
        const searchButton = document.getElementById('searchButton');
        const searchButtonText = searchButton.querySelector('.button-text');
        const searchButtonLoading = searchButton.querySelector('.button-loading');
        const searchInput = document.getElementById('searchInput');
        
        searchForm.addEventListener('submit', function(e) {
            // ë¡œë”© í‘œì‹œ (form submitì€ ê³„ì† ì§„í–‰ë¨)
            setTimeout(function() {
                searchButton.disabled = true;
                searchInput.readOnly = true;
                searchButtonText.style.display = 'none';
                searchButtonLoading.style.display = 'inline-flex';
                searchButtonLoading.style.alignItems = 'center';
                searchButtonLoading.style.gap = '8px';
            }, 0);
        });
    </script>
</body>
</html>

